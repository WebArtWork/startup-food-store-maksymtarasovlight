<div class="container food-menu__container">
    <section class="food-menu">
      {% for listItem in foodMenu %}
      <a href="#" class="food-menu__link">{{{ listItem.name }}}</a>
      {% endfor %}
    </section>
  </div>

  <main>
    <div class="bg-foto">
      <img src="{{{variables.bg_img}}}" alt="bg" />
    </div>
    <div class="container">
      <section class="food">
        {% for tag in tags %}
        <div class="food__title">
          <a href="#">{{{tag.name}}}</a>
        </div>
        <div class="food__list">
          {% for product in tag.products %}
          <div class="food-item">
            <div class="food-item__photo">
              <a href="/product" class="food-item__photo-img">
                <img src="{{{product.thumb}}}" alt="" />
              </a>
              <a href="/product" class="food-item__photo-text"> ХОЧУ! </a>
            </div>
            <div class="food-item__title">
              <a href="/product">{{{product.name}}}</a>
            </div>
            <div class="food-item__weight">{{{product.weight}}}</div>
            <div class="food-item__price">
              <span>{{{product.price}}}</span>₴
            </div>
            <div class="food-item__descr">
              {{{product.descr}}}
              <em>{{{product.packaging}}}</em>
            </div>
            <div class="food-item__controls {{{(productFavorited && productFavorited(product.id)) && 'productFavorited' || ''}}}" productId="{{{product.id}}}">
							<div class="food-item__controls-img">
								<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0,0,256,256"><g fill="#f7f7f7" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="translate(0,257.86667) scale(0.26667,0.26667)"><path d="M480,-120l-58,-52c-67.33333,-60.66667 -123,-113 -167,-157c-44,-44 -79,-83.5 -105,-118.5c-26,-35 -44.16667,-67.16667 -54.5,-96.5c-10.33333,-29.33333 -15.5,-59.33333 -15.5,-90c0,-62.66667 21,-115 63,-157c42,-42 94.33333,-63 157,-63c34.66667,0 67.66667,7.33333 99,22c31.33333,14.66667 58.33333,35.33333 81,62c22.66667,-26.66667 49.66667,-47.33333 81,-62c31.33333,-14.66667 64.33333,-22 99,-22c62.66667,0 115,21 157,63c42,42 63,94.33333 63,157c0,30.66667 -5.16667,60.66667 -15.5,90c-10.33333,29.33333 -28.5,61.5 -54.5,96.5c-26,35 -61,74.5 -105,118.5c-44,44 -99.66667,96.33333 -167,157zM480,-228c64,-57.33333 116.66667,-106.5 158,-147.5c41.33333,-41 74,-76.66667 98,-107c24,-30.33333 40.66667,-57.33333 50,-81c9.33333,-23.66667 14,-47.16667 14,-70.5c0,-40 -13.33333,-73.33333 -40,-100c-26.66667,-26.66667 -60,-40 -100,-40c-31.33333,0 -60.33333,8.83333 -87,26.5c-26.66667,17.66667 -45,40.16667 -55,67.5h-76c-10,-27.33333 -28.33333,-49.83333 -55,-67.5c-26.66667,-17.66667 -55.66667,-26.5 -87,-26.5c-40,0 -73.33333,13.33333 -100,40c-26.66667,26.66667 -40,60 -40,100c0,23.33333 4.66667,46.83333 14,70.5c9.33333,23.66667 26,50.66667 50,81c24,30.33333 56.66667,66 98,107c41.33333,41 94,90.16667 158,147.5zM480,-501z"></path></g></g></svg>
							</div>
							<div class="food-item__controls-number">{{{product.favorited || 0}}}</div>
						</div>
          </div>
          {% endfor %}
        </div>
        {% endfor %}

        <script type="module">
          import Dom from '/api/wjst/dom';
          import Productfavorite from '/api/wjst/productfavorite';
          Dom.click('productId', (element) => {
            console.log(element, element.getAttribute('productId'));
            if (element.classList.contains('productFavorited')) {
              element.classList.remove('productFavorited');
              Productfavorite.delete({
                product: element.getAttribute('productId')
              });
            } else {
              element.classList.add('productFavorited');
              Productfavorite.create({
                product: element.getAttribute('productId')
              });
            }
          });
        </script>
        
      </section>
    </div>
  </main>
